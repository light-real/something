## 1、指针概念
指针本身是一个变量，指向的是一个变量的地址
```C++
int a = 10;
int *p = &a;
```
这里p指向变量a的地址,such as p = 0xfe89a211,同时有*p = 10

## 2、芝士点
1、sizeof(指针)得到的是指针的大小，在32位系统中，指针的大小为4位；64位系统中，指针的大小为8位；sizeof(引用)得到的是引用所指变量的大小
2、当指针作为参数进行传递时，是将实参的拷贝传递给形参，两者指向的地址相同，但不是同一个变量，在函数中改变这个变量的指向不影响实参
```C++
void test(int *p)
{
    int a = 10;
    p = &a;
    cout<<p<<"  "<<*p<<endl;
}

int main()
{
    int *p = NULL;
    test(p);
    if(p == NULL)
    {
        cout<<"p = NULL"<<endl;
    }
    return 0;
}
//输出：
//0x22ff4401 10
//p = NULL
```

## 3、指针和数组的结合
```c++
    int *p[10]; //指针数组，突出数组，是一个数组变量，数组的大小为10，数组中每个元素都是指向int类型的指针变量
    int (*p)[10]; //数组指针，突出指针，只有一个变量，是指针类型，指向的是一个大小为10的int数组
    int *p(int); //指针函数，函数名是p，参数是int类型的，返回值是int*类型的
    int (*p)(int); //函数指针，强调的是指针，该指针指向的函数具有int类型参数，返回值是int类型的
```

### 3.1 指针函数和函数指针
#### 指针函数
```c++
    int *sum(int num) //function
    {
        //静态局部变量在程序开始时初始化，并在程序结束时销毁
        static int sum = 0; //注意点！！！
        for(int i = 0;i < num;i++)
        {
            sum += i;
        }
        int *p = sum; //指向的是一个static变量，函数结束并不会销毁
        return p;
    }

    int main()
    {
        int a = 10;
        int *p = sum(a);
        
        return 0;
    }
```
上述栗子就是指针函数，本质是是一个函数，不过返回值是指针，去接受的时候，需要用对应的指针去接受函数的返回值\
**注意**：在使用指针函数的时候，一定要避免出现返回局部变量指针的情况，因为函数结束时，局部变量就会销毁，那么在main函数中指向该变量，那块地址的内容已经销毁则会报错

#### 函数指针
与指针函数不同，函数指针的本质是一个指针，该指针的地址指向了一个函数，所以它是指向函数的指针\
函数的定义是存在于代码段，每个函数在代码段中，也有着自己的入口地址，函数指针就是指向代码段中函数入口地址的指针
```c++
    //函数指针的声明形式
    ret (*p)(args,...);
```
其中ret为返回值，args为参数列表，*p作为一个整体，代表的是指向该函数的指针，其中p被称为函数指针变量\
与数组类似，在数组中，数组名即代表着该数组的首地址，函数也是一样，函数名即是该数组的入口地址，因此，函数名就是该函数的函数指针\
```c++
    函数指针变量 = 函数名;
```
```c++
    int max(int a, int b)
    {
        return a > b ? a : b;
    }

    int main(void)
    {
        int (*p)(int, int); //函数指针的定义
        //int (*p)();       //函数指针的另一种定义方式，不过不建议使用
        //int (*p)(int a, int b);   //也可以使用这种方式定义函数指针
        
        p = max;    //函数指针初始化

        int ret = p(10, 15);    //函数指针的调用
        //int ret = (*max)(10,15);
        //int ret = (*p)(10,15);
        //以上两种写法与第一种写法是等价的，不过建议使用第一种方式
        printf("max = %d \n", ret);
        return 0;
    }
```

## 回调函数
函数指针的一个非常典型的应用就是回调函数\
回调函数就是一个通过指针函数调用的函数。其将函数指针作为一个参数，传递给另一个函数\
回调函数并不是由实现方直接调用，而是在特定的事件或条件发生时由另外一方来调用的\

```c++
    //函数功能：实现累加求和
    int func_sum(int n)
    {
            int sum = 0;
            if (n < 0)
            {
                    printf("n must be > 0\n");
                    exit(-1);
            }
            for (int i = 0; i < n; i++)
            {
                    sum += i;
            }
            return sum;
    }

    //这个函数是回调函数，其中第二个参数为一个函数指针，通过该函数指针来调用求和函数，并把结果返回给主调函数
    int callback(int n, int (*p)(int))
    {
            return p(n);
    }

    int main(void)
    {
            int n = 0;
            printf("please input number:");
            scanf("%d", &n);
            printf("the sum from 0 to %d is %d\n", n, callback(n, func_sum));       //此处直接调用回调函数，而不是直接调用func_sum函数
            return 0;
    }
```
这样的好处就是，如果以后对求和函数有优化，比如新写了个func_sum2函数的实现，只需要在调用回调函数的地方将函数指针指向func_sum2即可，而无需去修改callback函数内部




